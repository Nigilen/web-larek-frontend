# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

![alt text](https://github.com/Nigilen/web-larek-frontend/blob/main/uml-02.png)


## Подход разработки
В данном проекте используется событийно-ориентированный подход, который предполагает, что взаимодействие между различными компонентами приложения осуществляется через обмен сообщениями, вызванными определенными событиями. 

Кроме того, в проекте используется модель MVP (Model-View-Presenter), которая разделяет приложение на три основных компонента: модель, представлениe и презентатор. Модель отвечает за работу с данными и бизнес-логикой, представление представляет собой интерфейс пользователя, а презентатор связывает модель и представление, обрабатывая события и передавая данные между ними. 

## Базовый код

### Класс `Model<T>`

Абстрактные класс, содержащий общий конструктор и методы для компонентов модели данных. 

Класс является дженериком и принимает в переменной `T` тип данных модели. 

Конструктор, принимая на вход объект данных и событие, объединяет входящие объект данных с экземпляром класса

Единственный метод выдает сообщение об изменении данных — `emmitChanges` — принимает событие с дополнительными параметрами и отправляет их `EventEmitter`

### Класс `Component<T>`

Абстрактный класс, содержащий общий конструктор и методы для компонентов отображения. 

Класс является дженериком и принимает в переменной `T` тип данных компонента отображения. 

Конструктор принимает на вход `container` типа `HTMLElement` который будет отрисован по итогу выполнения класса

### Класс `EventEmitter`

Класс EventEmitter обеспечивает работу событий. Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события.
Реализуется по интерфейсу `IEvents`.
```tsx
interface IEvents {
  on<T extends object>(event: EventName, callback: (data: T) => void): void;
  emit<T extends object>(event: string, data?: T): void;
  trigger<T extends object>(event: string, context?: Partial<T>): (data: T) => void;
}
```

## Компоненты модели данных (Model)

### Класс `AppState`

Является моделью данных приложения в целом. Данный класс содержит в себе все основные группы данных страницы и методы работы с ними. 

Тут распределяются данные по частям приложения: каталог, превью, корзина, форма заказа. 

Расширяется базовым абстрактным классом `Model<T>` по интерфейсу `IAppState`. 

```tsx
interface IAppState {
  catalog: IProductItem[];
  preview: string;
  basket: string[];
  order: IOrder;
  loading: boolean;
}
```

### Класс `ProductItem`

Модель хранящая данные товара пришедшие с сервера.

Расширяется базовым абстрактным классом `Model<T>` по интерфейсу `IProductItem`.
```tsx
interface IProductItem {
  id: string;
  title: string;
  description: string;
  category: string;
  image: string;
  price: number | null;
}
```

## Компоненты представления (View)

### Класс `Card`

Отвечает за отображение данных карточки товара в различном виде: 

- как карточка в каталоге
- как превью
- как позиция в заказе

Поля отвечают за связь с разметкой, методы за наполнение разметки данными. 

Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `ICard`
```tsx
interface ICard {
  title: string;
  image: string;
  description: string;
  button: string;
  category: string;
  price: string;
}
```

### Класс `Page`

Отвечает за отображение страницы и ее основных элементов. 

Поля отвечают за связь с разметкой, методы за наполнение разметки данными, а также закрытие/открытие для листинга страницы при открытии/закрытии модального окна. 

Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `IPage`
```tsx
interface IPage {
  counter: number;
  catalog: HTMLElement[];
  locked: boolean;
}
```

### Класс `Modal`

Отвечает за отображение модального окна. 

По сути своей является «коробкой» для любого содержимого. Потому и имеет минимум полей и методов, которые связаны в основном с закрытием и открытием окна, а также наполнение его нужным контентом. 

Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `IModalData`
```tsx
interface IModalData {
    content: HTMLElement;
}
```

### Класс `Order`

Отвечает за отображение заказа в модальном окне. Можно сказать, что служит оберткой для формы заказа. 

Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `IOrderForm`
```tsx
interface IOrderForm {
  payment: string;
  email: string;
  phone: string;
  address: string;
}

```

### Класс `Form<T>`

Отвечает за отображение формы и ее валидацию. Интегрируется в заказ. 

Класс является дженериком и принимает в переменной `T` тип данных компонента отображения. 

Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `IFormState`
```tsx
interface IFormState {
    valid: boolean;
    errors: string[];
}
```

### Класс `Success`

Отвечает за отображение успешного оформления заказа в модальном окне. Можно сказать, что служит контентом для модалки. 

Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `ISuccess`
```tsx
interface ISuccess {
    total: number;
}
```

### Класс `Basket`

Отвечает за отображение корзины в модальном окне. Можно сказать, что служит контентом для модалки. Имеет возможность удаления позиции товара из корзины. 

Расширяется базовым абстрактным классом `Component<T>` по интерфейсу  `IBasket`
```tsx
interface IBasket {
    items: HTMLElement[];
    total: number;
}
```